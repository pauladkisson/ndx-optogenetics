groups:
- neurodata_type_def: OpticalFiberLocationsTable
  neurodata_type_inc: DynamicTable
  default_name: optical_fiber_locations_table
  doc: Information about the targeted stereotactic coordinates of the tip of the implanted
    optical fiber and the angles of the optical fiber in the brain.
  attributes:
  - name: reference
    dtype: text
    doc: Zero point for `ap_in_mm`, `ml_in_mm`, and `dv_in_mm` coordinates, e.g.,
      "Bregma at the cortical surface".
  datasets:
  - name: implanted_fiber_description
    neurodata_type_inc: VectorData
    dtype: text
    doc: Description of the implanted optical fiber, e.g., 'Lambda fiber implanted
      into right GPe'.
  - name: location
    neurodata_type_inc: VectorData
    dtype: text
    doc: Name of the targeted location of the tip of the optical fiber in the brain.
  - name: hemisphere
    neurodata_type_inc: VectorData
    dtype: text
    doc: The hemisphere ("left" or "right") of the targeted location of the tip of
      the optical fiber. Should be consistent with `ml_in_mm` coordinate.
  - name: ap_in_mm
    neurodata_type_inc: VectorData
    dtype: float
    doc: Anteroposterior coordinate in mm of the targeted location of the tip of the
      optical fiber (+ is anterior), with reference to `reference`.
  - name: ml_in_mm
    neurodata_type_inc: VectorData
    dtype: float
    doc: Mediolateral coordinate in mm of the targeted location of the tip of the
      optical fiber (+ is right), with reference to `reference`.
  - name: dv_in_mm
    neurodata_type_inc: VectorData
    dtype: float
    doc: Dorsoventral coordinate in mm of the targeted location of the tip of the
      optical fiber (+ is dorsal/above the brain), with reference to `reference`.
  - name: pitch_in_deg
    neurodata_type_inc: VectorData
    dtype: float
    doc: Pitch angle in degrees of the implanted optical fiber (rotation around left-right
      axis, + is rotating the nose upward).
    quantity: '?'
  - name: yaw_in_deg
    neurodata_type_inc: VectorData
    dtype: float
    doc: Yaw angle in degrees of the implanted optical fiber (rotation around dorsal-ventral
      axis, + is rotating the nose rightward).
    quantity: '?'
  - name: roll_in_deg
    neurodata_type_inc: VectorData
    dtype: float
    doc: Roll angle in degrees of the implanted optical fiber (rotation around anterior-posterior
      axis, + is rotating the right side downward).
    quantity: '?'
  - name: stereotactic_rotation_in_deg
    neurodata_type_inc: VectorData
    dtype: float
    doc: TODO
    quantity: '?'
  - name: stereotactic_tilt_in_deg
    neurodata_type_inc: VectorData
    dtype: float
    doc: TODO
    quantity: '?'
  - name: excitation_source
    neurodata_type_inc: VectorData
    dtype:
      target_type: ExcitationSource
      reftype: object
    doc: The excitation source device connected to the optical fiber.
    quantity: '?'
  - name: optical_fiber
    neurodata_type_inc: VectorData
    dtype:
      target_type: OpticalFiber
      reftype: object
    doc: The optical fiber device.
- neurodata_type_def: OptogeneticViruses
  neurodata_type_inc: NWBContainer
  name: optogenetic_viruses
  doc: Group containing one or more ViralVector objects, to be used within an OptogeneticExperimentMetadata
    object.
  groups:
  - neurodata_type_inc: ViralVector
    doc: ViralVector object(s).
    quantity: +
- neurodata_type_def: OptogeneticVirusInjections
  neurodata_type_inc: NWBContainer
  name: optogenetic_virus_injections
  doc: Group containing one or more ViralVectorInjection objects, to be used within
    an OptogeneticExperimentMetadata object.
  groups:
  - neurodata_type_inc: ViralVectorInjection
    doc: ViralVectorInjection object(s).
    quantity: +
- neurodata_type_def: OptogeneticEffectors
  neurodata_type_inc: NWBContainer
  name: optogenetic_effectors
  doc: Group containing one or more Effector objects, to be used within an OptogeneticExperimentMetadata
    object.
  groups:
  - neurodata_type_inc: Effector
    doc: Effector object(s).
    quantity: +
- neurodata_type_def: OptogeneticExperimentMetadata
  neurodata_type_inc: LabMetaData
  name: optogenetic_experiment_metadata
  doc: General metadata about the optogenetic stimulation.
  attributes:
  - name: stimulation_software
    dtype: text
    doc: Name of the software used to deliver optogenetic stimulation.
  groups:
  - name: optical_fiber_locations_table
    neurodata_type_inc: OpticalFiberLocationsTable
    doc: Information about the targeted stereotactic coordinates of the tip of the
      implanted optical fiber and the angles of the optical fiber in the brain.
  - name: optogenetic_viruses
    neurodata_type_inc: OptogeneticViruses
    doc: Group containing of one or more OptogeneticVirus objects.
    quantity: '?'
  - name: optogenetic_virus_injections
    neurodata_type_inc: OptogeneticVirusInjections
    doc: Group containing one or more OptogeneticVirusInjection objects.
    quantity: '?'
  - name: optogenetic_effectors
    neurodata_type_inc: OptogeneticEffectors
    doc: Group containing one or more OptogeneticEffector objects.
- neurodata_type_def: OptogeneticEpochsTable
  neurodata_type_inc: TimeIntervals
  doc: General metadata about the optogenetic stimulation that may change per epoch.
    Some epochs have no stimulation and are used as control epochs. If the stimulation
    is on, then the epoch is a stimulation.
  datasets:
  - name: stimulation_on
    neurodata_type_inc: VectorData
    dtype: bool
    doc: Whether optogenetic stimulation was used at any time during this epoch. If
      False, then all other metadata values should be 0.
  - name: pulse_length_in_ms
    neurodata_type_inc: VectorData
    dtype: float
    doc: Duration of one pulse, in ms. Use NaN if stimulation was off.
  - name: period_in_ms
    neurodata_type_inc: VectorData
    dtype: float
    doc: Duration between the starts of two pulses, in ms. Use NaN if stimulation
      was off.Note that the interpulse interval = `period_ms` - `pulse_length_ms`
  - name: number_pulses_per_pulse_train
    neurodata_type_inc: VectorData
    dtype: int
    doc: Number of pulses in one pulse train. After this number of pulses, no more
      stimulation occurs until the next train begins (see `intertrain_interval_ms`).
      Use -1 if stimulation was off.
  - name: number_trains
    neurodata_type_inc: VectorData
    dtype: int
    doc: Number of trains per stimulus. After this number of trains, no more stimulation
      occurs until stimulation is re-triggered. Use -1 if stimulation was off.
  - name: intertrain_interval_in_ms
    neurodata_type_inc: VectorData
    dtype: float
    doc: Duration between the starts of two consecutive pulse trains, in ms. Determines
      the frequency of stimulation. Use NaN if stimulation was off.
  - name: power_in_mW
    neurodata_type_inc: VectorData
    dtype: float
    doc: Constant power of excitation source throughout the epoch, in mW, e.g., 77
      mW.
  - name: optical_fiber_locations_index
    neurodata_type_inc: VectorIndex
    doc: Index to allow reference to multiple rows of the OpticalFiberLocationsTable.
  - name: optical_fiber_locations
    neurodata_type_inc: DynamicTableRegion
    doc: References row(s) of OpticalFiberLocationsTable.
